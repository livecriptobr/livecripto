<objective>
FASE 0: Setup inicial do projeto LiveCripto

Purpose: Criar a fundação do projeto Next.js com todas as configurações base
Output: Projeto Next.js funcional com Tailwind, Clerk, Supabase configurados
</objective>

<context>
Projeto novo em: C:\Users\Pichau\livecripto
Stack obrigatória:
- Next.js 14+ (App Router)
- TypeScript
- Tailwind CSS
- Clerk (auth P2P)
- Supabase (Postgres)
- Prisma (ORM recomendado)
</context>

<requirements>
1. Inicializar projeto Next.js com App Router + TypeScript + Tailwind
2. Configurar Prisma com Supabase (PostgreSQL)
3. Criar schema completo do banco de dados
4. Configurar Clerk com middleware
5. Criar estrutura de pastas organizada
6. Criar arquivos .env.example e .env.local (sem valores reais)

Schema do banco (obrigatório):
- User: id, clerkUserId (unique), email, username (unique), displayName, overlayToken, overlayTokenUpdatedAt, pixKey, lightningAddress, alertSettings (JSON), createdAt, updatedAt
- Donation: id, userId, donorName, message, amountCents, currency, paymentProvider, providerPaymentId, status, createdAt, paidAt
- Alert: id, userId, donationId, status, audioUrl, lockExpiresAt, createdAt, readyAt, consumedAt, lastError
- WithdrawRequest: id, userId, method, amountCents, destinationSnapshot, status, createdAt, processedAt, auditNotes
- WebhookEvent: id, provider, eventKey, payloadHash, receivedAt, processedAt, status, error
- Ledger: id, userId, type, source, amountCents, referenceId, createdAt

Enums necessários:
- PaymentProvider: MERCADOPAGO, OPENPIX, COINSNAP
- DonationStatus: CREATED, PENDING, PAID, FAILED, EXPIRED, REFUNDED
- AlertStatus: QUEUED, LOCKED, READY, PLAYING, DONE, SKIPPED
- WithdrawStatus: REQUESTED, PROCESSING, PAID, REJECTED
- LedgerType: CREDIT, DEBIT
- LedgerSource: DONATION, WITHDRAW, ADJUSTMENT
</requirements>

<implementation>
Estrutura de pastas:
```
src/
├── app/
│   ├── (auth)/
│   │   ├── sign-in/[[...sign-in]]/page.tsx
│   │   └── sign-up/[[...sign-up]]/page.tsx
│   ├── (dashboard)/
│   │   └── dashboard/
│   │       ├── layout.tsx
│   │       └── page.tsx
│   ├── (public)/
│   │   ├── [username]/page.tsx
│   │   └── overlay/[username]/page.tsx
│   ├── api/
│   │   ├── public/
│   │   ├── private/
│   │   ├── webhooks/
│   │   ├── overlay/
│   │   ├── internal/
│   │   └── cron/
│   ├── checkout/
│   │   └── return/page.tsx
│   ├── layout.tsx
│   └── page.tsx
├── components/
│   ├── ui/
│   ├── dashboard/
│   ├── donate/
│   └── overlay/
├── lib/
│   ├── db.ts (Prisma client)
│   ├── clerk.ts
│   ├── payments/
│   │   ├── mercadopago.ts
│   │   ├── openpix.ts
│   │   └── coinsnap.ts
│   ├── tts.ts
│   ├── bunny.ts
│   └── utils.ts
├── services/
│   ├── user.service.ts
│   ├── donation.service.ts
│   ├── alert.service.ts
│   └── payment.service.ts
└── types/
    └── index.ts
```

Middleware Clerk - rotas protegidas:
- /dashboard/* → requer auth
- /api/private/* → requer auth
- Públicas: /, /[username], /overlay/*, /api/public/*, /api/webhooks/*

Variáveis de ambiente (.env.example):
```
# App
NEXT_PUBLIC_APP_URL=

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
CLERK_WEBHOOK_SECRET=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up

# Supabase/Database
DATABASE_URL=

# MercadoPago
MERCADOPAGO_ACCESS_TOKEN=
MERCADOPAGO_WEBHOOK_SECRET=

# OpenPix
OPENPIX_APP_ID=
OPENPIX_WEBHOOK_SECRET=

# Coinsnap
COINSNAP_API_KEY=
COINSNAP_STORE_ID=
COINSNAP_WEBHOOK_SECRET=

# Bunny CDN
BUNNY_STORAGE_HOST=
BUNNY_STORAGE_ZONE=
BUNNY_STORAGE_KEY=
BUNNY_CDN_HOST=

# Google TTS
GOOGLE_TTS_API_KEY=

# Internal
INTERNAL_API_SECRET=
CRON_SECRET=
```
</implementation>

<output>
Criar arquivos:
- package.json (com todas as dependências)
- tsconfig.json
- tailwind.config.ts
- next.config.js
- prisma/schema.prisma (schema completo)
- src/middleware.ts (Clerk middleware)
- src/lib/db.ts (Prisma client singleton)
- src/app/layout.tsx (ClerkProvider + globals)
- src/app/page.tsx (landing page básica)
- src/app/(auth)/sign-in/[[...sign-in]]/page.tsx
- src/app/(auth)/sign-up/[[...sign-up]]/page.tsx
- src/app/(dashboard)/dashboard/layout.tsx
- src/app/(dashboard)/dashboard/page.tsx (placeholder)
- .env.example
- .gitignore (incluir .env.local)
</output>

<verification>
1. pnpm install funciona sem erros
2. pnpm prisma generate funciona
3. pnpm dev inicia o servidor
4. Middleware Clerk redireciona /dashboard para sign-in quando não autenticado
5. Schema Prisma válido e completo
</verification>

<summary_requirements>
Criar `.prompts/002-livecripto-rebuild/SUMMARY-00.md`

Incluir:
- One-liner substantivo sobre o setup
- Lista de arquivos criados
- Próximo passo: Executar Fase 1 (provisionamento de usuário)
</summary_requirements>

<success_criteria>
- Projeto Next.js inicializado e funcional
- Prisma schema completo com todos os models
- Clerk middleware configurado corretamente
- Estrutura de pastas criada
- .env.example documentado
- Servidor dev roda sem erros
- SUMMARY-00.md criado
</success_criteria>
